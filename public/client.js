"use strict";!function(){function e(e,t,n){return e.addEventListener(t,n)}function t(e){return document.getElementById(e)}function n(e){for(;e.children.length;)e.removeChild(e.children[e.children.length-1])}function i(e,t){f[e.id]||(f[e.id]=e.className.includes("off")),f[e.id]&&!t?e.classList.remove("off"):e.classList.add("off")}function a(){Array.prototype.slice.apply(p.children).forEach(function(e){e.getAttribute("data-game-id")===u?e.classList.add("selected"):e.classList.remove("selected")})}function o(e){u=e.target.getAttribute("data-game-id"),a()}function d(t){n(p),t.forEach(function(t){var n=document.createElement("li");n.setAttribute("data-game-id",t.id),n.innerHTML="id: "+t.id+"<br>players: "+t.dungeons.length,e(n,"click",o),p.appendChild(n)})}function c(){s.on("room-list",function(e){d(e),i(g),i(m)}),s.on("game-created",function(e){l=new Game(s,!1),l.updateGame(e),i(m)}),s.on("update",function(e){l||(l=new Game(s,!1)),l.updateGame(e),i(m,!0),i(g,!0)}),s.on("error",function(){}),Array.prototype.slice.apply(document.getElementsByTagName("button")).forEach(function(t){e(t,"click",function(){switch(t.id){case"join-game":s.emit(t.id,u);break;default:s.emit(t.id,s.id)}})}),window.addEventListener("keyup",function(e){var t,n=e.keyCode;l&&(87===n||38===n?t="up":40===n||83===n?t="down":65===n||37===n?t="left":68!==n&&39!==n||(t="right"),s.emit("move-player",t))})}function r(){s=io({upgrade:!1,transports:["websocket"]}),c()}var u,s,l,f={},m=t("start-menu"),g=t("games-menu"),p=t("games-list");window.addEventListener("load",r,!1)}();