"use strict";!function(){function e(e,t,n){return e.addEventListener(t,n)}function t(e){return document.getElementById(e)}function n(e){for(;e.children.length;)e.removeChild(e.children[e.children.length-1])}function i(e,t){f[e.id]||(f[e.id]=e.className.includes("off")),f[e.id]&&!t?e.classList.remove("off"):e.classList.add("off")}function o(){Array.prototype.slice.apply(p.children).forEach(function(e){e.getAttribute("data-game-id")===s?e.classList.add("selected"):e.classList.remove("selected")})}function a(e){s=e.target.getAttribute("data-game-id"),o()}function c(t){n(p),t.forEach(function(t){var n=document.createElement("li");n.setAttribute("data-game-id",t.id),n.innerHTML="id: "+t.id+"<br>players: "+t.dungeons.length,e(n,"click",a),p.appendChild(n),console.log(t.dungeons.length)})}function d(){l.on("room-list",function(e){console.log(e),c(e),i(g),i(m)}),l.on("game-created",function(e){u=new Game(l),u.updateGame(e),i(m)}),l.on("update",function(e){u||(u=new Game({id:e.id})),u.updateGame(e),i(m,!0),i(g,!0),console.log(e)}),l.on("error",function(){}),Array.prototype.slice.apply(document.getElementsByTagName("button")).forEach(function(t){e(t,"click",function(){switch(t.id){case"join-game":l.emit(t.id,s);break;default:l.emit(t.id,l.id)}})})}function r(){l=io({upgrade:!1,transports:["websocket"]}),d()}var s,l,u,f={},m=t("start-menu"),g=t("games-menu"),p=t("games-list");window.addEventListener("load",r,!1)}();