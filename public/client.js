"use strict";!function(){function e(e,t,n){return e.addEventListener(t,n)}function t(e){return document.getElementById(e)}function n(e){for(;e.children.length;)e.removeChild(e.children[e.children.length-1])}function i(e,t){g[e.id]||(g[e.id]=e.className.includes("off")),g[e.id]&&!t?e.classList.remove("off"):e.classList.add("off")}function o(){Array.prototype.slice.apply(y.children).forEach(function(e){e.getAttribute("data-game-id")===f?e.classList.add("selected"):e.classList.remove("selected")})}function a(e){f=e.target.getAttribute("data-game-id"),o()}function c(t){n(y),t.forEach(function(t){var n=document.createElement("li");n.setAttribute("data-game-id",t.id),n.innerHTML="id: "+t.id+"<br>players: "+t.dungeons.length,e(n,"click",a),y.appendChild(n)})}function d(){Array.prototype.slice.apply(L.getElementsByTagName("button")).forEach(function(e){var t=e.getAttribute("data-option-index");parseInt(t,10)===parseInt(b,10)?e.classList.add("selected"):e.classList.remove("selected")}),p.selectedOption=p.options[b]}function r(e){var t=e.target.getAttribute("data-option-index");b=t,d()}function s(e){n(L),e.forEach(function(e,t){var n=createUIElement("li"),i=createUIElement("button",{"data-option-index":t},{click:r});i.innerHTML=e,n.appendChild(i),L.appendChild(n)}),void 0===b&&(b=0),d()}function l(){m.on("room-list",function(e){c(e),i(v),i(h)}),m.on("game-created",function(e){p=new Game(m,!1),p.updateGame(e),s(p.options),i(h),E.classList.remove("off")}),m.on("update",function(e){p||(p=new Game(m,!1)),p.updateGame(e),i(h,!0),i(v,!0),p.options.length&&s(p.options),E.classList.remove("off")}),m.on("error",function(){}),Array.prototype.slice.apply(document.getElementsByTagName("button")).forEach(function(t){e(t,"click",function(){switch(t.id){case"join-game":m.emit(t.id,f);break;default:m.emit(t.id,m.id)}})}),window.addEventListener("keyup",function(e){var t,n=e.keyCode;p&&(87===n||38===n?t="up":40===n||83===n?t="down":65===n||37===n?t="left":68!==n&&39!==n||(t="right"),t&&m.emit("move-player",t))})}function u(){m=io({upgrade:!1,transports:["websocket"]}),l()}var f,m,p,g={},h=t("start-menu"),v=t("games-menu"),y=t("games-list"),E=t("option-list"),L=E.getElementsByTagName("ul")[0],b=0;window.addEventListener("load",u,!1)}();